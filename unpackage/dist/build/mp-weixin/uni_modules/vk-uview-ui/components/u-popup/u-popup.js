"use strict";const e=require("../../../../common/vendor.js"),t={name:"u-popup",emits:["update:modelValue","input","open","close"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},show:{type:Boolean,default:!1},mode:{type:String,default:"left"},mask:{type:Boolean,default:!0},length:{type:[Number,String],default:"auto"},zoom:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},customStyle:{type:Object,default:()=>({})},popup:{type:Boolean,default:!0},borderRadius:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"close"},closeIconPos:{type:String,default:"top-right"},closeIconColor:{type:String,default:"#909399"},closeIconSize:{type:[String,Number],default:"30"},width:{type:String,default:""},height:{type:String,default:""},negativeTop:{type:[String,Number],default:0},maskCustomStyle:{type:Object,default:()=>({})},duration:{type:[String,Number],default:250},blur:{type:[String,Number],default:0}},data:()=>({visibleSync:!1,showDrawer:!1,timer:null,closeFromInner:!1}),computed:{valueCom(){return this.modelValue},style(){let e={};if("left"==this.mode||"right"==this.mode?e={width:this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),height:"100%",transform:`translate3D(${"left"==this.mode?"-100%":"100%"},0px,0px)`}:"top"!=this.mode&&"bottom"!=this.mode||(e={width:"100%",height:this.height?this.getUnitValue(this.height):this.getUnitValue(this.length),transform:`translate3D(0px,${"top"==this.mode?"-100%":"100%"},0px)`}),e.zIndex=this.uZindex,this.borderRadius){switch(this.mode){case"left":e.borderRadius=`0 ${this.borderRadius}rpx ${this.borderRadius}rpx 0`;break;case"top":e.borderRadius=`0 0 ${this.borderRadius}rpx ${this.borderRadius}rpx`;break;case"right":e.borderRadius=`${this.borderRadius}rpx 0 0 ${this.borderRadius}rpx`;break;case"bottom":e.borderRadius=`${this.borderRadius}rpx ${this.borderRadius}rpx 0 0`}e.overflow="hidden"}return this.duration&&(e.transition=`all ${this.duration/1e3}s linear`),e},centerStyle(){let e={};return e.width=this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),e.height=this.height?this.getUnitValue(this.height):"auto",e.zIndex=this.uZindex,e.marginTop=`-${this.$u.addUnit(this.negativeTop)}`,this.borderRadius&&(e.borderRadius=`${this.borderRadius}rpx`,e.overflow="hidden"),e},uZindex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},watch:{valueCom:{immediate:!0,handler(e){e?this.open():this.closeFromInner||this.close(),this.closeFromInner=!1}}},mounted(){this.valueCom&&this.open()},methods:{getUnitValue:e=>/(%|px|rpx|auto)$/.test(e)?e:e+"rpx",maskClick(){this.close()},close(){this.closeFromInner=!0,this.change("showDrawer","visibleSync",!1)},modeCenterClose(e){"center"==e&&this.maskCloseAble&&this.close()},open(){this.change("visibleSync","showDrawer",!0)},change(e,t,o){1==this.popup&&(this.$emit("input",o),this.$emit("update:modelValue",o)),this[e]=o,this.timer=o?setTimeout((()=>{this[t]=o,this.$emit(o?"open":"close")}),50):setTimeout((()=>{this[t]=o,this.$emit(o?"open":"close")}),this.duration)}}};if(!Array){(e.resolveComponent("u-mask")+e.resolveComponent("u-icon"))()}Math||((()=>"../u-mask/u-mask.js")+(()=>"../u-icon/u-icon.js"))();const o=e._export_sfc(t,[["render",function(t,o,s,i,r,n){return e.e({a:r.visibleSync},r.visibleSync?e.e({b:e.o(n.maskClick),c:e.p({blur:s.blur,duration:s.duration,"custom-style":s.maskCustomStyle,maskClickAble:s.maskCloseAble,"z-index":n.uZindex-2,show:r.showDrawer&&s.mask}),d:"center"==s.mode},"center"==s.mode?e.e({e:s.closeable},s.closeable?{f:e.o(n.close),g:e.n("u-close--"+s.closeIconPos),h:e.p({name:s.closeIcon,color:s.closeIconColor,size:s.closeIconSize})}:{},{i:e.o((()=>{})),j:e.o((()=>{})),k:e.s(n.centerStyle)}):{},{l:"center"!=s.mode&&s.closeable},"center"!=s.mode&&s.closeable?{m:e.p({name:s.closeIcon,color:s.closeIconColor,size:s.closeIconSize})}:{},{n:e.o(((...e)=>n.close&&n.close(...e))),o:e.n("u-close--"+s.closeIconPos),p:e.o((e=>n.modeCenterClose(s.mode))),q:e.n(s.safeAreaInsetBottom?"safe-area-inset-bottom":""),r:e.n("u-drawer-"+s.mode),s:e.n(r.showDrawer?"u-drawer-content-visible":""),t:e.n(s.zoom&&"center"==s.mode?"u-animation-zoom":""),v:e.o((()=>{})),w:e.s(n.style),x:e.s(s.customStyle),y:e.s({zIndex:n.uZindex-1})}):{})}],["__scopeId","data-v-955ce94a"]]);wx.createComponent(o);
