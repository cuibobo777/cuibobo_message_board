"use strict";const o=require("../../../../../common/vendor.js"),s=require("../../../common/login-page.mixin.js"),e=require("../../../common/password.js");require("../../../common/store.js"),require("../../../config.js");const r=o.Es.importObject("uni-id-co",{customUI:!0}),a={mixins:[s.mixin],data:()=>({focusOldPassword:!1,focusNewPassword:!1,focusNewPassword2:!1,formData:{oldPassword:"",newPassword:"",newPassword2:""},rules:{oldPassword:{rules:[{required:!0,errorMessage:"请输入新密码"},{pattern:/^.{6,20}$/,errorMessage:"密码为6 - 20位"}]},...e.passwordMod.getPwdRules("newPassword","newPassword2")},logo:"/static/logo.png"}),onReady(){this.$refs.form.setRules(this.rules)},onShow(){},methods:{submit(){this.$refs.form.validate().then((s=>{let{oldPassword:e,newPassword:a}=this.formData;r.updatePwd({oldPassword:e,newPassword:a}).then((s=>{o.index.removeStorageSync("uni_id_token"),o.index.setStorageSync("uni_id_token_expired",0),o.index.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})})).catch((s=>{o.index.showModal({content:s.message,showCancel:!1})}))})).catch((o=>{let s=o[0].key;s=s.replace(s[0],s[0].toUpperCase()),this["focus"+s]=!0}))}}};if(!Array){(o.resolveComponent("uni-easyinput")+o.resolveComponent("uni-forms-item")+o.resolveComponent("uni-forms"))()}Math||((()=>"../../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../../../uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../../uni-forms/components/uni-forms/uni-forms.js"))();const n=o._export_sfc(a,[["render",function(s,e,r,a,n,t){return{a:n.logo,b:o.o((o=>n.focusOldPassword=!1)),c:o.o((o=>n.formData.oldPassword=o)),d:o.p({focus:n.focusOldPassword,type:"password",inputBorder:!1,placeholder:"请输入旧密码",modelValue:n.formData.oldPassword}),e:o.p({name:"oldPassword"}),f:o.o((o=>n.focusNewPassword=!1)),g:o.o((o=>n.formData.newPassword=o)),h:o.p({focus:n.focusNewPassword,type:"password",inputBorder:!1,placeholder:"请输入新密码",modelValue:n.formData.newPassword}),i:o.p({name:"newPassword"}),j:o.o((o=>n.focusNewPassword2=!1)),k:o.o((o=>n.formData.newPassword2=o)),l:o.p({focus:n.focusNewPassword2,type:"password",inputBorder:!1,placeholder:"请再次输入新密码",modelValue:n.formData.newPassword2}),m:o.p({name:"newPassword2"}),n:o.o(((...o)=>t.submit&&t.submit(...o))),o:o.sr("form","1281eff0-0"),p:o.p({value:n.formData,"err-show-type":"toast"})}}]]);wx.createPage(n);
