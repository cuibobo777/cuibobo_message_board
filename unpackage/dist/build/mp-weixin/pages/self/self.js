"use strict";const e=require("../../common/vendor.js"),a=require("../../uni_modules/uni-id-pages/common/store.js");if(require("../../uni_modules/uni-id-pages/config.js"),!Array){e.resolveComponent("uni-dateformat")()}Math;const r={__name:"self",setup(r){const t=e.Es.database(),u=e.computed$1((()=>a.store.userInfo)),n=e.computed$1((()=>a.store.hasLogin)),o=e.reactive({artCount:0,likeCount:0});e.onLoad((()=>{i()}));const i=async()=>{var e;if(!n.value)return;let a=await t.collection("board_article").where("user_id == $cloudEnv_uid && delState != true").count(),r=await t.collection("board_article").where("user_id == $cloudEnv_uid && delState != true").groupBy("user_id").groupField("sum(like_count) as likeScore").get();o.artCount=a.result.total,o.likeCount=null==(e=r.result.data[0])?void 0:e.likeScore},l=()=>{_()||e.index.navigateTo({url:"/pages/board_article/list"})},s=()=>{_()||e.index.navigateTo({url:"/pages/board_like/list"})},d=()=>{_()||e.index.navigateTo({url:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback"})},f=()=>{e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})},c=()=>{_()||e.index.showModal({title:"是否确认退出?",success:e=>{e.confirm&&a.mutations.logout()}})},_=()=>!n.value&&(e.index.showToast({title:"未登录",icon:"none"}),!0);return(a,r)=>e.e({a:e.unref(n)&&e.unref(u).avatar_file&&e.unref(u).avatar_file.url},e.unref(n)&&e.unref(u).avatar_file&&e.unref(u).avatar_file.url?{b:e.unref(u).avatar_file.url}:{},{c:e.unref(n)},e.unref(n)?{d:e.t(e.unref(u).nickname||e.unref(u).username||e.unref(u).mobile),e:e.p({date:e.unref(u).register_date,threshold:[3600,3122064e6]})}:{},{f:e.o(f),g:e.unref(n)&&e.unref(u).avatar_file&&e.unref(u).avatar_file.url},e.unref(n)&&e.unref(u).avatar_file&&e.unref(u).avatar_file.url?{h:e.unref(u).avatar_file.url}:{},{i:e.t(o.likeCount||0),j:e.t(o.artCount),k:e.o(l),l:e.o(s),m:e.o(d),n:e.o(c)})}},t=e._export_sfc(r,[["__scopeId","data-v-7609bad4"]]);wx.createPage(t);
