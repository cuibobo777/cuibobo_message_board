"use strict";const e=require("../../../../../../common/vendor.js");exports.calcImageOffset=function(e,t){let i=e.imageLeft,c=e.imageTop;t=t||e.scale;let h=e.imageWidth,n=e.imageHeight;e.angle/90%2&&(h=e.imageHeight,n=e.imageWidth);const{clipX:r,clipWidth:a,clipY:l,clipHeight:o}=e,g=e=>e*t/2,p=g(h),s=g(n);return i=r+p>=i?i:r+p,i=r+a-p<=i?i:r+a-p,c=l+s>=c?c:l+s,c=l+o-s<=c?c:l+o-s,{left:i,top:c,scale:t}},exports.calcImageScale=function(e,t){t=t||e.scale;let{imageWidth:i,imageHeight:c,clipWidth:h,clipHeight:n,angle:r}=e;return r/90%2&&(i=c,c=i),i*t<h&&(t=h/i),c*t<n&&(t=Math.max(t,n/c)),t},exports.calcImageSize=function(t,i,c){let h=t,n=i,{clipWidth:r,clipHeight:a,sysinfo:l,width:o,height:g}=c;if(h&&n)h/n>(r||o)/(r||g)?(n=a||g,h=t/i*n):(h=r||o,n=i/t*h);else{h=(l||e.index.getSystemInfoSync()).windowWidth,n=0}return{imageWidth:h,imageHeight:n}},exports.calcPythagoreanTheorem=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},exports.clipTouchMoveOfCalculate=function(e,t){const i=t.touches[0].clientX,c=t.touches[0].clientY;let{clipWidth:h,clipHeight:n,clipY:r,clipX:a,clipStart:l,isLockRatio:o,maxWidth:g,minWidth:p,maxHeight:s,minHeight:u}=e;g/=2,p/=2,u/=2,s/=2;let m=h,d=n,f=r,x=a,w=()=>(m=m<=g?m>=p?m:p:g,d=d<=s?d>=u?d:u:s,!(m>g||m<p||d>s||d<u)||!o);switch(d=l.height+(l.corner>1&&l.corner<4?1:-1)*(l.y-c),l.corner){case 1:if(m=l.width-l.x+i,o&&(d=m/(h/n)),!w())return;break;case 2:if(m=l.width-l.x+i,o&&(d=m/(h/n)),!w())return;f=l.clipY-(d-l.height);break;case 3:if(m=l.width+l.x-i,o&&(d=m/(h/n)),!w())return;f=l.clipY-(d-l.height),x=l.clipX-(m-l.width);break;case 4:if(m=l.width+l.x-i,o&&(d=m/(h/n)),!w())return;x=l.clipX-(m-l.width)}return{width:m,height:d,clipX:x,clipY:f}},exports.determineDirection=function(e,t,i,c,h,n){let r;const a=[e+i/2,t+c/2],l=[h,n];return l[0]<=a[0]&&l[1]<=a[1]?r=3:l[0]>=a[0]&&l[1]<=a[1]?r=2:l[0]<=a[0]&&l[1]>=a[1]?r=4:l[0]>=a[0]&&l[1]>=a[1]&&(r=1),r},exports.imageTouchMoveOfCalcOffset=function(e,t,i){return{left:t-e.touchRelative[0].x,top:i-e.touchRelative[0].y}};
